# 配置

框架中的配置，统一在 **config** 目录 内的 **typs** 目录 进行定义以及在 **vars** 目录 进行实例化。  
且所有配置都应在 **autoload** 目录中提前注入容器，以便程序读取使用

## config 配置目录&文件说明

只对默认配置进行说明

- **typs** 配置定义目录，用于开发者自定义配置，框架配置已在各个功能包中定义，无需重复定义
- **vars** 配置实例化目录，用于开发者实例化配置
- **vars/ConfigCenterConf.go** 配置中心配置，目前只支持 **_file_** 和 **_nacos_** 两种类型driver
- **vars/CommandConf.go** 任务指令配置
- **vars/DatabaseConf.go** 数据库配置
- **vars/LogConf.go** 日志配置
- **vars/RouteConf.go** 路由配置
- **vars/RpcConf.go** rpc配置
- **vars/ServerConf.go** 应用服务配置

## ServerConf 说明

```
package vars

import "gitee.com/csingo/cServer"

var ServerConfig = &cServer.ServerConf{
	HttpServer: &cServer.ServerConf_HttpServer{
		Enable:         true, // 是否启用HTTP
		Port:           8080, // 服务端口
		ReadTimeout:    10,   // 读超时，单位秒
		WriteTimeout:   10,   // 写超时，单位秒
		ExitTimeout:    10,   // 请求超时，单位秒
		MaxHeaderBytes: 20,   // 请求头大小，偏移量，1 << 20，即10MB
	},
}

```

## 自定义配置

### csingo 创建配置

```
csingo config::create --name=TestConf
```

### 手动创建配置

- **config/typs** 目录创建 **TestConf.go** 文件，定义配置具体结构

```golang
package typs

// TestConf 自定义配置结构体
type TestConf {}

// ConfigName 继承 cConfig.ConfigInterface，用于读取配置
func (i *TestConf) ConfigName() string {
	return "TestConf"
}

```

- **config/vars** 目录创建 **TestConf.go** 文件，实例化配置

```golang
package vars

import (
	"demo/config/typs"
)

var TestConfig = &typs.TestConf{}
```

- **autoload/Config.go** 文件添加容器注入

```golang
package autoload

import (
	"demo/config/vars"
	"gitee.com/csingo/cServer"
)

func InjectConf() {
	cServer.Inject(vars.LogConfig)
	cServer.Inject(vars.ConfigCenterConfig)
	cServer.Inject(vars.DatabaseConfig)
	cServer.Inject(vars.CommandConfig)
	cServer.Inject(vars.RouteConfig)
	cServer.Inject(vars.RpcConfig)
	cServer.Inject(vars.ServerConfig)

	cServer.Inject(vars.TestConfig)
}

```
